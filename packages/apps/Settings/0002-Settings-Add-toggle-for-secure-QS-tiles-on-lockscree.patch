From 599b509de806e8d259d5646e55430875115971fd Mon Sep 17 00:00:00 2001
From: penglezos <panagiotisegl@gmail.com>
Date: Tue, 21 Mar 2023 19:01:23 +0200
Subject: [PATCH 2/2] Settings: Add toggle for secure QS tiles on lockscreen

Signed-off-by: penglezos <panagiotisegl@gmail.com>
---
 res/values/cm_strings.xml        | 4 ++++
 res/xml/screen_lock_settings.xml | 6 ++++++
 2 files changed, 10 insertions(+)

diff --git a/res/values/cm_strings.xml b/res/values/cm_strings.xml
index 1b120c170a..f80bc7abc3 100644
--- a/res/values/cm_strings.xml
+++ b/res/values/cm_strings.xml
@@ -178,4 +178,8 @@
 
     <!-- Warning message for the sd card setup -->
     <string name="storage_warning_internal">Warning: This option may not work properly or lead to data loss and is therefore not recommended!</string>
+
+    <!-- QSTiles requires unlocking before being accessible -->
+    <string name="qstiles_requires_unlocking_title">Quick settings sensitive tiles</string>
+    <string name="qstiles_requires_unlocking_summary">Unlock device to use sensitive quick settings tiles</string>
 </resources>
diff --git a/res/xml/screen_lock_settings.xml b/res/xml/screen_lock_settings.xml
index 7feea02afa..94865aaaaa 100644
--- a/res/xml/screen_lock_settings.xml
+++ b/res/xml/screen_lock_settings.xml
@@ -54,4 +54,10 @@
         android:title="@string/unlock_scramble_pin_layout_title"
         android:summary="@string/unlock_scramble_pin_layout_summary" />
 
+    <!-- QSTiles requires unlocking before being accessible -->
+    <lineageos.preference.LineageSecureSettingSwitchPreference
+        android:key="qs_tiles_requires_unlocking"
+        android:title="@string/qstiles_requires_unlocking_title"
+        android:summary="@string/qstiles_requires_unlocking_summary"
+        android:defaultValue="true"/>
 </PreferenceScreen>
-- 
2.40.0

